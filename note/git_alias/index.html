<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><title>オレのおすすめ Git エイリアス 5 選 - アルパカの徒然文</title><meta name="description" content="普段使っている Git のエイリアスを 5 つ紹介します。"/><link rel="canonical" href="https://codehex.dev/note/git_alias"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@codehex"/><meta property="og:url" content="https://codehex.dev/note/git_alias"/><meta property="og:title" content="オレのおすすめ Git エイリアス 5 選 - アルパカの徒然文"/><meta property="og:image" content="https://codehex.dev/assets/images/c80dde4ce5ac91392fc105ba3f085130.png"/><meta property="og:description" content="普段使っている Git のエイリアスを 5 つ紹介します。"/><meta property="og:type" content="article"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="next-head-count" content="12"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8097329174824434" crossorigin="anonymous"></script><link rel="preload" href="/_next/static/css/a06bcb21c067ae5f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a06bcb21c067ae5f.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-1d40a542908ec4b3.js" defer=""></script><script src="/_next/static/chunks/framework-0ba0ddd33199226d.js" defer=""></script><script src="/_next/static/chunks/main-3e1f83e356353203.js" defer=""></script><script src="/_next/static/chunks/pages/_app-29c235e094f245c1.js" defer=""></script><script src="/_next/static/chunks/186-81857d9b3c3c717c.js" defer=""></script><script src="/_next/static/chunks/55-8174b7f62ba27649.js" defer=""></script><script src="/_next/static/chunks/327-407bbdfad760cb5f.js" defer=""></script><script src="/_next/static/chunks/pages/note/git_alias-861825ed817f70ca.js" defer=""></script><script src="/_next/static/e132e14fb2fb9422c77fd8df4ce4a1f6434adc36/_buildManifest.js" defer=""></script><script src="/_next/static/e132e14fb2fb9422c77fd8df4ce4a1f6434adc36/_ssgManifest.js" defer=""></script></head><body><div id="__next"><main role="main" class="w-full mx-auto max-w-3xl xl:max-w-5xl"><div class="w-full bg-white antialiased"><div class="mx-8 sm:mx-10 md:mx-12 pt-10 pb-16"><div class="pb-2 border-b border-gray-200 mb-10"><h1 class="inline-block text-3xl font-bold text-gray-900 tracking-tight">オレのおすすめ Git エイリアス 5 選</h1><div class="text-sm sm:text-base whitespace-nowrap text-gray-500"><div class="sr-only">Published on</div><time dateTime="2022-06-15T00:38:45+09:00">June 14, 2022<!-- --> (<!-- -->a month ago<!-- -->)</time></div><div aria-label="タグ一覧" class="flex flex-wrap gap-2"><a role="link" class="w-max inline-flex rounded-sm bg-blue-100 hover:bg-blue-600 px-2 py-0.5 text-sm" href="/note/tags/git/"><span class="font-medium text-blue-700 hover:text-white"># <!-- -->git</span></a></div></div><article role="article" class="prose sm:prose-sm md:prose-md"><p><a href="https://motemen.hatenablog.com/entry/2022/04/git-aliases">Gitのおすすめエイリアス5選</a>を読んで自分も幾つか晒してみようと思った。</p>
<h2 id="シンプルなコミットログとグラフを表示する"><a href="#%E3%82%B7%E3%83%B3%E3%83%97%E3%83%AB%E3%81%AA%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%83%AD%E3%82%B0%E3%81%A8%E3%82%B0%E3%83%A9%E3%83%95%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B" aria-hidden="true" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></a>シンプルなコミットログとグラフを表示する</h2>
<p><code>git l</code></p>
<pre><code>l = log --graph --decorate --pretty=oneline --abbrev-commit
</code></pre>
<p><code>git log</code> を利用するとコミットログからメッセージだったり、誰がコミットしたのか読めるけど殺風景だし、あまりどのブランチがどうマージされたのか理解しずらい。</p>
<p>単純なコミットメッセージとブランチの関係性をパッと知りたい時によく利用している。こんな感じで表示される。</p>
<p><img src="https://user-images.githubusercontent.com/6500104/173620809-771b790a-a4fb-4c38-b4a6-7833a6c39a41.png" alt="コミットメッセージとブランチ関係をグラフで表示する"/></p>
<h2 id="人に優しい変更差分を表示する"><a href="#%E4%BA%BA%E3%81%AB%E5%84%AA%E3%81%97%E3%81%84%E5%A4%89%E6%9B%B4%E5%B7%AE%E5%88%86%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B" aria-hidden="true" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></a>人に優しい変更差分を表示する</h2>
<p><code>git dsf</code></p>
<pre><code>dsf = &quot;!f() { [ -z \&quot;$GIT_PREFIX\&quot; ] || cd \&quot;$GIT_PREFIX\&quot; &amp;&amp; git diff --color \&quot;$@\&quot; | diff-so-fancy  | less --tabs=4 -RFX; }; f&quot;
</code></pre>
<p><a href="https://github.com/so-fancy/diff-so-fancy">github.com/so-fancy/diff-so-fancy</a> を利用して差分を表示している。これは人が読みやすい出力を目指して作られているため、文字単位での変更も分かりやすくしてくれる。</p>
<p>macOS だと homebrew 経由でインストールできる。</p>
<pre><code>$ brew update
$ brew install diff-so-fancy
</code></pre>
<p>GtHub リポジトリの README でも通常の diff とどう違うのかがスクショ付きで紹介されている。下記の画像は改行もハイライトしてくれることを伝えたかったため載せた。</p>
<p><img src="https://user-images.githubusercontent.com/6500104/173623988-5422be53-6fe0-4dd8-abd1-516957f04313.png" alt="diff-so-fancy を使った差分表示"/></p>
<h2 id="コミットメッセージだけ書く"><a href="#%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%A0%E3%81%91%E6%9B%B8%E3%81%8F" aria-hidden="true" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></a>コミットメッセージだけ書く</h2>
<p><code>git cm</code></p>
<pre><code>cm = commit -m
</code></pre>
<p>ガンガンコミットする時は <code>git cm &#x27;commit msg&#x27;</code> のようにコミットしている。確か <code>git commit</code> を使うとエディタが起動されるので面倒だった記憶。</p>
<p>コミット作成の背景など詳細を記述したい場合は <code>git cm &#x27;title&#x27; -m &#x27;description&#x27;</code> のように使う。</p>
<h2 id="ブランチを切り替える"><a href="#%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%82%92%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88%E3%82%8B" aria-hidden="true" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></a>ブランチを切り替える</h2>
<p><code>git ck</code></p>
<pre><code>ck = &quot;!f() { [ $# -eq 0 ] &amp;&amp; git checkout $(git branch --sort=-authordate | perl -a -nle &#x27;$F[0] ne \&quot;*\&quot; and print $F[0]&#x27; | fzf --height 40%) || git checkout $@; }; f&quot;
</code></pre>
<p>本当は <code>switch</code> に切り替えたいが未だに checkout を使っている...（ごめんちょ）</p>
<p>基本的な使い方として <code>git ck -b new_branch</code> で新しくブランチを作成して <code>git ck new_branch</code> をタイプしてブランチを切り替えている。</p>
<p><a href="https://github.com/junegunn/fzf">github.com/junegunn/fzf</a> をインストールすることで <code>git ck</code> だけタイプすると切り替え可能なブランチ一覧を出力してくれて、選択したブランチへ切り替えられるようにもしている。これは筆者が何ブランチを作っていったっけ？とよくなるからである。</p>
<p><img src="https://user-images.githubusercontent.com/6500104/173629121-eb4f5f01-fcf3-4a9a-9954-8426c53a07bf.png" alt="fzf でチェックアウト可能なブランチをフィルタリングする"/></p>
<p>その前にまず git コマンドの呼び出しを <code>g</code> だけで行えるようにしている。</p>
<h2 id="直近のコミットから削除したファイルを復元する"><a href="#%E7%9B%B4%E8%BF%91%E3%81%AE%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%81%8B%E3%82%89%E5%89%8A%E9%99%A4%E3%81%97%E3%81%9F%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E5%BE%A9%E5%85%83%E3%81%99%E3%82%8B" aria-hidden="true" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></a>直近のコミットから削除したファイルを復元する</h2>
<p><code>git restore</code></p>
<pre><code>restore = &quot;!f() { git checkout \&quot;$(git log --format=&#x27;%h:%ar&#x27; -- \&quot;$@\&quot; | head -n 1 | cut -d: -f 1,1)^\&quot; -- \&quot;$@\&quot;; }; f&quot;
</code></pre>
<p>筆者はおっちょこちょいなため、よく間違ってファイルを消した状態でコミットしてしまうことがある。そこで削除してしまったファイルを過去のコミットから復元させる作業を行うのにこれを使う。</p>
<p><code>git restore package.json</code> すると直近のコミットから package.json を復元してくれる。</p>
<p>こんな感じでコミット履歴から該当するファイルをコミットしたものだけフィルタリングできる。この仕組みを利用している。</p>
<pre><code>git log -- &quot;package.json&quot;
</code></pre>
<h2 id="おまけ"><a href="#%E3%81%8A%E3%81%BE%E3%81%91" aria-hidden="true" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg></a>おまけ</h2>
<p>普段から zsh を使っていて <code>g</code> だけで git コマンドを呼び出せるように下記の関数を <code>.zshrc</code> に登録している。</p>
<pre><code class="language-bash">function g () {
  if [[ $# &gt; 0 ]]
  then
    git $@
  else
    git s
  fi
}
compdef g=git
</code></pre>
<p><code>compdef g=git</code> をすることで git コマンドの補完も使えるようにしている。</p>
<p>ちなみに <code>g</code> だけタイプすると手元の状態をシンプルなフォーマットで表示してくれる。これは <a href="https://twitter.com/trueymt2">@trueymt2</a> さんから教えてもらって便利に使っている。</p>
<pre><code>s = status -s
</code></pre>
<p><a href="https://github.com/Code-Hex/dotfiles">https://github.com/Code-Hex/dotfiles</a></p></article><div aria-label="SNSで共有する" class="flex space-x-2 mt-8"><a href="https://b.hatena.ne.jp/entry/s/codehex.dev/note/git_alias" class="w-16 max-h-6 rounded-sm border border-blue-400" target="_blank" rel="noopener noreferrer" role="link" aria-label="Hatena Bookmarkで共有する"><div class="w-full flex justify-between items-center"><span class="bg-blue-400 hover:bg-blue-500 text-white text-sm font-bold py-px px-1">B!</span><span class="w-full text-center text-gray-600 text-sm hover:bg-blue-100 hover:bg-opacity-50">38</span></div></a><a href="https://twitter.com/intent/tweet?text=%E3%82%AA%E3%83%AC%E3%81%AE%E3%81%8A%E3%81%99%E3%81%99%E3%82%81%20Git%20%E3%82%A8%E3%82%A4%E3%83%AA%E3%82%A2%E3%82%B9%205%20%E9%81%B8&amp;url=https://codehex.dev/note/git_alias" class="flex items-center w-20 rounded-sm bg-blue-400 hover:bg-blue-500" target="_blank" rel="noopener noreferrer" role="link" aria-label="Twitterで共有する"><div class="px-2 w-full flex justify-between items-center"><svg version="1.1" id="Logo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="w-4 h-4" viewBox="0 0 248 204" xml:space="preserve"><g id="Logo_1_"><path id="white_background" fill="#fff" d="M221.95,51.29c0.15,2.17,0.15,4.34,0.15,6.53c0,66.73-50.8,143.69-143.69,143.69v-0.04 C50.97,201.51,24.1,193.65,1,178.83c3.99,0.48,8,0.72,12.02,0.73c22.74,0.02,44.83-7.61,62.72-21.66 c-21.61-0.41-40.56-14.5-47.18-35.07c7.57,1.46,15.37,1.16,22.8-0.87C27.8,117.2,10.85,96.5,10.85,72.46c0-0.22,0-0.43,0-0.64 c7.02,3.91,14.88,6.08,22.92,6.32C11.58,63.31,4.74,33.79,18.14,10.71c25.64,31.55,63.47,50.73,104.08,52.76 c-4.07-17.54,1.49-35.92,14.61-48.25c20.34-19.12,52.33-18.14,71.45,2.19c11.31-2.23,22.15-6.38,32.07-12.26 c-3.77,11.69-11.66,21.62-22.2,27.93c10.01-1.18,19.79-3.86,29-7.95C240.37,35.29,231.83,44.14,221.95,51.29z"></path></g></svg><span class="text-white text-xs font-bold py-px px-1">Tweet</span></div></a></div></div></div></main><footer role="contentinfo" class="w-full mx-auto max-w-3xl xl:max-w-5xl"><div class="text-md font-medium leading-5 divide-y divide-gray-200"><div class="mx-8 sm:mx-10 md:mx-12 pb-24 lg:pb-16"><a role="link" class="text-teal-600 hover:text-teal-700" href="/note/">← Back to the note</a></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"ogpPath":"/assets/images/c80dde4ce5ac91392fc105ba3f085130.png","bookmarkCount":"38"},"__N_SSG":true},"page":"/note/git_alias","query":{},"buildId":"e132e14fb2fb9422c77fd8df4ce4a1f6434adc36","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>