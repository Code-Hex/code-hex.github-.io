<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/1603687e8f7004d3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1603687e8f7004d3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-829f202eac0b6556.js" defer=""></script><script src="/_next/static/chunks/framework-f24ee7685564395e.js" defer=""></script><script src="/_next/static/chunks/main-d8da880aeb2604cd.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6aba51fb4d7298d5.js" defer=""></script><script src="/_next/static/chunks/541-9470330e8c8d1998.js" defer=""></script><script src="/_next/static/chunks/281-0dc43d5dc0ae8f85.js" defer=""></script><script src="/_next/static/chunks/pages/note-bbe3d323c2073e47.js" defer=""></script><script src="/_next/static/42b7f37accd970d6945b46bc01e1151d9833b2aa/_buildManifest.js" defer=""></script><script src="/_next/static/42b7f37accd970d6945b46bc01e1151d9833b2aa/_ssgManifest.js" defer=""></script><script src="/_next/static/42b7f37accd970d6945b46bc01e1151d9833b2aa/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="w-full mx-auto antialiased max-w-3xl xl:max-w-5xl"><div class="mx-8 sm:mx-10 md:mx-12 py-10"><main class="divide-y divide-gray-200"><div class="py-4"><h1 class="text-4xl tracking-tight font-extrabold text-gray-900">Notes</h1><p class="mt-3 text-xl text-gray-500 sm:mt-4">This is<!-- --> <a class="text-blue-400 hover:text-blue-600 hover:underline" href="/">@codehex</a>&#x27;s personal note. Candid thoughts any technical stacks and other interesting things.</p></div><div class="mx-auto"><ul class="divide-y divide-gray-200"><li class="py-4"><div class="mb-4 pt-4"><div class="flex flex-col space-y-8"><div class="flex flex-col space-y-1"><div class="pt-1.5 flex justify-between items-center"><a href="/note/google_spf_dkim_dmarc/"><h2 class="text-2xl sm:text-3xl font-bold text-gray-900">取得したドメインで送信するメールの信頼性を上げる方法</h2></a></div><div class="text-sm sm:text-base whitespace-nowrap text-gray-500"><div class="sr-only">Published on</div><time dateTime="2021-12-19">December 19, 2021<!-- --> (<!-- -->3 days ago<!-- -->)</time></div><div class="flex space-x-2 py-2"><a class="inline-flex rounded-sm bg-blue-100 hover:bg-blue-600 px-2 py-0.5 text-sm" href="/note/tags/terraform/"><span class="font-medium text-blue-700 hover:text-white"># <!-- -->terraform</span></a><a class="inline-flex rounded-sm bg-blue-100 hover:bg-blue-600 px-2 py-0.5 text-sm" href="/note/tags/gcp/"><span class="font-medium text-blue-700 hover:text-white"># <!-- -->gcp</span></a><a class="inline-flex rounded-sm bg-blue-100 hover:bg-blue-600 px-2 py-0.5 text-sm" href="/note/tags/email/"><span class="font-medium text-blue-700 hover:text-white"># <!-- -->email</span></a></div></div><div class="flex flex-col space-y-6"><div class="prose sm:prose-sm md:prose-md"><p>ドメインを取得後にそれを使ったメールアドレスで送信できるようになったが、受信先でそのメールが迷惑フォルダへ分類されることがある。</p><p>会社では Google Domain でドメインを取得後、Google Workspace を利用してメールを送信できるようになった。DNS の管理は Cloud DNS を利用していて、その設定は Terraform を用いて管理している。</p><p>当初の設定はシンプルなものであった。</p><ol><li>DNS ゾーンを設定</li><li>設定したゾーンに対して MX レコードを設定</li></ol><pre><code class="language-hcl">resource &quot;google_dns_managed_zone&quot; &quot;example_com_domain&quot; {
  name     = &quot;example-com&quot;
  dns_name = &quot;example.com.&quot;
}

# https://support.google.com/a/answer/9222085
resource &quot;google_dns_record_set&quot; &quot;example_com_email&quot; {
  name         = google_dns_managed_zone.example_com_domain.dns_name
  type         = &quot;MX&quot;
  ttl          = 300
  managed_zone = google_dns_managed_zone.example_com_domain.name
  rrdatas = [
    &quot;1 aspmx.l.google.com.&quot;,
    &quot;5 alt1.aspmx.l.google.com.&quot;,
    &quot;5 alt2.aspmx.l.google.com.&quot;,
    &quot;10 alt3.aspmx.l.google.com.&quot;,
    &quot;10 alt4.aspmx.l.google.com.&quot;,
  ]
}
</code></pre><p>これだけで取得したドメインを利用したアドレスでメールの送信ができる。しかし受信先の Gmail 上では次のような警告が表示されていた。</p><p><img src="https://user-images.githubusercontent.com/6500104/146682538-4be73b57-f202-4ad7-a47c-8316388e9149.png" alt="146682538-4be73b57-f202-4ad7-a47c-8316388e9149.png"/></p><p>これは Gmail 側で行われる認証ロジックによって、ドメインを取得した本人（もしくは法人）から送信されているメールかどうか判断できなかった場合に表示される。</p><p>本記事では Terraform で管理された Cloud DNS を例にメールの信頼性をどう向上させたのかを紹介していく。</p></div><div class="flex text-base font-medium"><a class="text-teal-600 hover:text-teal-700" aria-label="取得したドメインで送信するメールの信頼性を上げる方法" href="/note/google_spf_dkim_dmarc/">Read more →</a></div></div></div></div></li><li class="py-4"><div class="mb-4 pt-4"><div class="flex flex-col space-y-8"><div class="flex flex-col space-y-1"><div class="pt-1.5 flex justify-between items-center"><a href="/note/hello/"><h2 class="text-2xl sm:text-3xl font-bold text-gray-900">Perl 5</h2></a></div><div class="text-sm sm:text-base whitespace-nowrap text-gray-500"><div class="sr-only">Published on</div><time dateTime="2020-11-24">November 24, 2020<!-- --> (<!-- -->a year ago<!-- -->)</time></div><div class="flex space-x-2 py-2"><a class="inline-flex rounded-sm bg-blue-100 hover:bg-blue-600 px-2 py-0.5 text-sm" href="/note/tags/perl/"><span class="font-medium text-blue-700 hover:text-white"># <!-- -->perl</span></a></div></div><div class="flex flex-col space-y-6"><div class="prose sm:prose-sm md:prose-md"><p>これはコードブロックプレビュー</p><pre><code class="language-perl">print &quot;Hello, world&quot;
</code></pre></div><div class="flex text-base font-medium"><a class="text-teal-600 hover:text-teal-700" aria-label="Perl 5" href="/note/hello/">Read more →</a></div></div></div></div></li><li class="py-4"><div class="mb-4 pt-4"><div class="flex flex-col space-y-8"><div class="flex flex-col space-y-1"><div class="pt-1.5 flex justify-between items-center"><a href="/note/hello2/"><h2 class="text-2xl sm:text-3xl font-bold text-gray-900">こんにちは mdx!!</h2></a></div><div class="text-sm sm:text-base whitespace-nowrap text-gray-500"><div class="sr-only">Published on</div><time dateTime="2020-11-23">November 23, 2020<!-- --> (<!-- -->a year ago<!-- -->)</time></div><div class="flex space-x-2 py-2"><a class="inline-flex rounded-sm bg-blue-100 hover:bg-blue-600 px-2 py-0.5 text-sm" href="/note/tags/blog/"><span class="font-medium text-blue-700 hover:text-white"># <!-- -->blog</span></a><a class="inline-flex rounded-sm bg-blue-100 hover:bg-blue-600 px-2 py-0.5 text-sm" href="/note/tags/tag1/"><span class="font-medium text-blue-700 hover:text-white"># <!-- -->tag1</span></a><a class="inline-flex rounded-sm bg-blue-100 hover:bg-blue-600 px-2 py-0.5 text-sm" href="/note/tags/tag2/"><span class="font-medium text-blue-700 hover:text-white"># <!-- -->tag2</span></a><a class="inline-flex rounded-sm bg-blue-100 hover:bg-blue-600 px-2 py-0.5 text-sm" href="/note/tags/perl/"><span class="font-medium text-blue-700 hover:text-white"># <!-- -->perl</span></a></div></div><div class="flex flex-col space-y-6"><div class="prose sm:prose-sm md:prose-md"><p>これは <code>Preview</code> のテストです。 What&#x27;s <strong>preview</strong>?</p><p>本当に不思議な改行！ 😄</p></div><div class="flex text-base font-medium"><a class="text-teal-600 hover:text-teal-700" aria-label="こんにちは mdx!!" href="/note/hello2/">Read more →</a></div></div></div></div></li><li class="py-4"><div class="mb-4 pt-4"><div class="flex flex-col space-y-8"><div class="flex flex-col space-y-1"><div class="pt-1.5 flex justify-between items-center"><a href="/note/raci_matrix/"><h2 class="text-2xl sm:text-3xl font-bold text-gray-900">RACI を使った責務の明確化</h2></a></div><div class="text-sm sm:text-base whitespace-nowrap text-gray-500"><div class="sr-only">Published on</div><time dateTime="2019-08-06">August 06, 2019<!-- --> (<!-- -->2 years ago<!-- -->)</time></div><div class="flex space-x-2 py-2"><a class="inline-flex rounded-sm bg-blue-100 hover:bg-blue-600 px-2 py-0.5 text-sm" href="/note/tags/RACI/"><span class="font-medium text-blue-700 hover:text-white"># <!-- -->RACI</span></a></div></div><div class="flex flex-col space-y-6"><div class="prose sm:prose-sm md:prose-md"><p>今日会社ではじめて「RACI」という言葉を知った。</p><p>会社では呼び名が分からなかったのでずっと「<a href="https://ja.wikipedia.org/wiki/%E3%83%A9%E3%83%83%E3%82%B7%E3%83%BC">ラッシー</a>」と呼んでいたが、本当は「レイシー」と呼ぶらしい。RACI matrix と呼ぶっぽい。</p><p>これはプロジェクトや社内での何かしらの工程での役割分担を matrix を使って明確描写するビジネスツールとのこと。</p><p>タスクを 4 種類の参加者の責任型に分割し、各参加者には異なる役割が割り当てられる。そしてそれぞれの役割は下記のように決まっている。</p></div><div class="flex text-base font-medium"><a class="text-teal-600 hover:text-teal-700" aria-label="RACI を使った責務の明確化" href="/note/raci_matrix/">Read more →</a></div></div></div></div></li></ul></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/note","query":{},"buildId":"42b7f37accd970d6945b46bc01e1151d9833b2aa","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>